---
title: 结构性模式  
date: 2020-06-11 10:05:58  
tags: 设计模式  
categories: 技术

---
## 概述
结构型模式描述如何将类或对象按某种布局组成更大的结构。**它分为类结构型模式和对象结构型模式，前者采用继承机制来组织接口和类，后者釆用组合或聚合来组合对象**。

由于组合关系或聚合关系比继承关系耦合度低，满足“合成复用原则”，所以对象结构型模式比类结构型模式具有更大的灵活性。

## 代理模式与适配器模式
### 代理模式的结构
代理模式的主要角色如下。

1. 抽象主题（Subject）类：通过接口或抽象类声明真实主题和代理对象实现的业务方法。
2. 真实主题（Real Subject）类：实现了抽象主题中的具体业务，是代理对象所代表的真实对象，是最终要引用的对象。
3. 代理（Proxy）类：提供了与真实主题相同的接口，其内部含有对真实主题的引用，它可以访问、控制或扩展真实主题的功能。

### 适配器模式的结构
适配器模式（Adapter）包含以下主要角色。

1. 目标（Target）接口：当前系统业务所期待的接口，它可以是抽象类或接口。
2. 适配者（Adaptee）类：它是被访问和适配的现存组件库中的组件接口。
3. 适配器（Adapter）类：它是一个转换器，通过继承或引用适配者的对象，把适配者接口转换成目标接口，让客户按目标接口的格式访问适配者。

### 对比
![](https://s1.ax1x.com/2020/06/11/tH74iD.png)  
通过对比发现这两种模式都有三个角色，只考虑对象适配器的话，写出的代码结构类似如下：  

	class ObjectAdapter implements Target
	{
	    private Adaptee adaptee;
	    public ObjectAdapter(Adaptee adaptee)
	    {
	        this.adaptee=adaptee;
	    }
	    public void request()
	    {
	        adaptee.specificRequest();
	    }
	}

都是让Proxy或者Adapter类实现客户端真正调用的接口（Target或者Subject）。我个人理解，适配器和代理模式在使用上没有太大的差别，根本的区别是认知上的处理问题的场景。或者是，代理模式一般是不需要做额外工作的（只有类似加日志这种操作），而适配器模式是需要做适配工作的。